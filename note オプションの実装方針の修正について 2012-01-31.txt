18:47		チャットルームに参加しています...
18:48		式神研究同好会 での会話を開始しました: 月曜日 2012/01/30 18:48:26
		式神研究同好会 での会話を開始しました: 月曜日 2012/01/30 18:48:26
		jogetu_ はユーザーモードを +o に設定しました。enogu はチャットルームのオペレータになります。
20:03		-> nekoneko が 式神研究同好会 に参加しました
20:04		jogetu_ はユーザーモードを +o に設定しました。nekoneko はチャットルームのオペレータになります。
21:24		-> Holy が 式神研究同好会 に参加しました
		nekoneko はユーザーモードを +o に設定しました。Holy はチャットルームのオペレータになります。
00:38		-> umethyl が 式神研究同好会 に参加しました
00:39	Holy	一吊りで　狼だけが　吹き飛んだ
00:45	umethyl	1.5だけど、人魚にバグ発見
	umethyl	ぐぬぬ
00:48	umethyl	えのぐーん
00:49	umethyl	SFのマイルストーンなんだけどさ
	umethyl	あれ、終了にしちゃうと1.5とかのバグチケット切れないの
01:05	enogu	復活とかは?
01:06	umethyl	それは簡単
	enogu	できますね
	umethyl	ただ、マイルストーンが長くなって邪魔、というなら、1.5.1とかマイナーバージョンでマイルストーン置くけど
	umethyl	どっちがいい？
01:07	enogu	サポート期間ってものもありますし、当面オープンで良いのでは?
	umethyl	じゃあ、そういう事で
	umethyl	手元のメモはなるべくあそこに置いておくんで
	enogu	はいな
	umethyl	とりあえず、人魚のバグはパッチ作った
01:08	umethyl	あのバグは、エラーで止まったりはしないけど人魚がただのニートになっちゃうんで
	enogu	泳げない人魚はただのニートですよ
01:09	enogu	ところで闇鍋村のコードを見ながらオプションの用途と構造を考えていたのですが
01:10	enogu	オプションクラスに処理を委譲した方がやばいケースがある予感がして
	enogu	※メンテの手間とか
	umethyl	んー、そこらへん難しいなら私が手を入れるよ
	enogu	思ったのですが
	umethyl	増やすの私しかいないし
01:11	enogu	配役ビルダーというか、配役サポート関数とそれが使う変数を抽出したクラスいるんじゃないかと
01:12	enogu	オプションはもっぱらそのコントロール担当
	enogu	やる手間を考えると現状維持でそれほど仕事が増えないなら無駄な予感もしますが…
01:13	umethyl	んー、なんだかスパゲティを始末しようとしてフォーク引き抜けなってない？
	enogu	ナイフを使おうか考え中って感じですね
	enogu	使えばほぐれますがそこまでして消化すべきものかと
01:14	umethyl	複雑な場所なのは確かなんだけど、説き方がどうにも違和感が
	enogu	設計手法としてはBuilderパターンと言ってわりあい古典的な手段かと
01:15	umethyl	んー
	enogu	ただ、ビルダー作ったところでやっぱりオプションの大部分にとってクラスの分離はいらんわけで。
01:16	enogu	要らなくもないですけれど、定義を提供するという以上の意味合いを持てない。
	umethyl	chaos ってクラスロードして、chaos->OutputRoomOption() する構造そんなに難しい？
01:17	umethyl	この場合は・・・special_role ってクラスをロードして、そこが chaos やら duel やらをさらに呼ぶのかな
	enogu	超闇対応とかを考えると、正攻法では継承階層が必要以上に深い予感は。
	umethyl	それならもう special_role クラスで全部賄っていいんじゃないかな
01:18	enogu	それは同感です。
	umethyl	配役用のクラスと村立てようのクラスが乖離してもいいと思う
	umethyl	元々別々なんだから、そこまで頭悩ませて融合させる価値は無い
01:19	umethyl	というより、そのためにインスタンス増やしまくるようなら要らないと思う
	umethyl	なんか、こう、軽く私が振ってしまってごめん、ってレベル
	umethyl	見込み甘すぎたわー
01:20	enogu	ビルダー自体は配役処理で一個発生する程度なのでコストは無視できるレベルですね
	enogu	それはまあ今回の問題ではないですが
	umethyl	配役側はほっといていいよ
	umethyl	そもそも、村立て用データを稼動時に持っておく意味ないから
01:21	umethyl	一つのクラスに纏まれば開発が楽かなって思っただけだし
	enogu	実際そこは動作時のパフォーマンスと同じくらい重要だと思いますがね…
	umethyl	全然
	umethyl	作る側としてもあまり変わらない
01:22	umethyl	見せる部分と動作する部分、元々別ユニットで考える場所だから
01:24	umethyl	ただ、ファイル置き場が include/option に纏まることはかなりポイントが高いから
01:25	enogu	作業ミスとかでバグるのはアホらしいと思うクチでして
	enogu	ミスというか漏れというか
	umethyl	構造理解してないで作ろうとする側をフォローする気はしないんだよねー
	enogu	SVNのコミット抜けとかちょくちょくやっておいて言えた台詞ではないかも知れませんが
01:26	umethyl	そもそも、ゲームオプションを作ろうと思ったら、配役、村立て、管理者用の設定ファイル、取説、画像
	umethyl	最低これだけ必要
01:27	umethyl	クラスを一箇所におくことができても編集箇所を一箇所にするのは100%不可能だよ
01:28	enogu	アイコン画像だけはどうしようもないですね…
01:29	umethyl	役職に至ってはまず相関関係を理解してもらわないと
	umethyl	ライブラリは一箇所に集約したけどね
01:30		<- nekoneko は切断しました (Ping timeout)
01:38	umethyl	あー
	umethyl	必要なデータ消えてる
01:39	enogu	?
	umethyl	config/game_option_config
01:40	umethyl	 public $change_cupid_list = array('change_cupid', 'change_mind_cupid', 'change_triangle_cupid', 'change_angel');
	umethyl	これ
	umethyl	～置換村ってオプションをそもそもON/OFFにするか、という選択と
	umethyl	そのうちどれを有効にするかって二段階にしてたんだけども
01:41	umethyl	まあ、そこはそれほど重要じゃないけど
	umethyl	admin/role_test.php がさっぱり動かない
01:42	enogu	ここは多分1.5のgame_configからそのまま引っこ抜いてきたような
	umethyl	game_option_config から消えてるから参照できなくなっているんだけど
	enogu	間違って消してしまったのだろうか…
	umethyl	たぶん、使い道がピンとこなかったんじゃないかな
01:43	umethyl	セレクタ自体のON/OFFと、セレクタの中身の設定なんだよね、これ
	umethyl	いや、今はこんな変数使ってない、というのならテスト側の方をハードコードするよ
01:44	umethyl	置換の種類増やすたびに編集しないと動かないからああいうオプションの設定の仕方にしたんだけど
01:45	enogu	なるほど、こいつらはItem使って追加する仕様に引っ越していますね…
01:46	enogu	一旦コンフィグに追加します
	umethyl	ああ、いいよいいよ
	enogu	どのみちItemSourceメソッドでロードしても特に弊害はないはず
	enogu	こういうのを二重化するとロクなことがありませんゆえ。
01:47	umethyl	どういう設定方法なら管理者が分かりやすいか、ってユーザビリティの場所なんだよね
	umethyl	えのぐんあまり得意そうではない気がする
	umethyl	私も相当ドライなんだけど
01:49	umethyl	うえー、このエラーどこだー
01:50	enogu	戻すのは良いのですが、ちょっと仕様変更入るかもです
	enogu	というか多分連想配列に
	enogu	array_keysでロードするようにしていただけると > さっきのリスト群
	umethyl	とりあえず、config はメモ帳で弄るレベルの人を想定してね
01:51	umethyl	理想は phpMyAdmin 弄れる人だけど、それを前提にするのは事実上不可能だから
	enogu	どのみちドロップダウンで出ることを鑑みれば連想配列の方が手間が少ないのでは
01:52	umethyl	設定方法をちゃんと書いてくれるならそれでもいいけど
01:53	umethyl	ただ、 self::Add(self::NOT_OPTION, RoomOptionItem::Selector('max_user', '最大人数', '最大人数', '配役は<a href="info/rule.php">ルール</a>を確認して下さい')
	umethyl	とか、これは私が困るレベルなのでやめてー
01:54	umethyl	それじゃあ、role_test は仕様固まるまで手出しやめるかなー
	enogu	hai
01:55	umethyl	ああ、そうだ
	umethyl	quiz のコントラクタ見たんだけども
	umethyl	 parent::__construct('quiz', 'クイズ村', 'GMが出題者になり、プレイヤー全員に回答者がつきます。');
	enogu	今回は全体的にブースト設定のリストと相似形になりますよー > さっきのリスト群
	enogu	あ、説明文はアドリブです
01:56	umethyl	そこじゃなくて
	enogu	quizいらねーって気づいたのは3時間前です(キリッ
	enogu	※コンストラクタの第一引数
	umethyl	延々追っかけて行くと結局 $this->property に入れてるだけに見えるんだよね
01:57	enogu	現状では。
	umethyl	最初からクラス内のプロパティに入れておいて何が困るの？
	enogu	とりあえずエラー吐かれないためにそうしたまでの話で。
	umethyl	途中経過なのね。りょーかい
01:59	enogu	ここまで来ると定義情報みたいなものを毎回展開するのもアレなので、既存のRoomOptionItemの振る舞い自体一部切り分ける可能性が。
	umethyl	デバッグ以外でそこ手出ししていないからそこはいいよん
02:00	enogu	で、今はOptionクラスの振る舞いを確認しつつとりあえず統合できるものを統合してみたレベル
	umethyl	私のイメージとしては
02:01	umethyl	村立て用のデータが一つのファイルに収まっていて、同一APIで必要なデータが取り出せていればいいかなと
	umethyl	ああ、一つのオプションが、ね
	umethyl	初めは配役用に作ったクラスと同一ファイルに突っ込めればいいかなと軽く思っていたけど
02:02	umethyl	決闘と闇鍋が例外の塊みたいだからそこはやめましょう、ってことで
02:03	umethyl	で、村立て画面を表示するためのコントロールクラスが room_option_items_class かな
02:04	umethyl	今は、TextRoomOptionItem() とかをひたすら継承して同一クラスにしてるっぽいけど
	enogu	ええ、とりあえずRoomOptionItemは表示のみの奴を分離します。
	umethyl	RoomOptionItemコントローラが、個別の OptionItem クラスをロードだけしておいて
02:05	umethyl	コントローラで表示順(＝呼び出し順)を制御して、Output していけばいいんじゃないかな
02:06	umethyl	そうすると、foreach(コントローラ->loaded as $class){ echo $class->Generate(); }
	umethyl	とか、こうなるんじゃないかなーと
	enogu	実際、再設計するとしたら委譲がメインになると思いますが、呼び出しは各オプションクラスにやっていただこうかと。
02:07	enogu	ここまで来るとサービスルーチン集のみで作動しますゆえ、オプション定義のロードがだいぶ自由になるはず
		µüÓ¹ëüÁóÆn%7F/Ï;L%7FoµüÓ¹ëüÁóÆn%7F Unknown command
	enogu	 /サービスルーチン集のみ/描画がらみはサービスルーチン集のみ/
02:08	umethyl	うん、みえてそうね
	umethyl	すばらしい
	enogu	…こう言う時に限って致命的なところで見解が違うものですけれどね(ぼそっ
02:09	umethyl	エンジン作るのはえのぐんがセンスありそうなんだけどねー
02:10	umethyl	私はチューニングするのが好きなんで
	enogu	…XMLで延々と設定ファイルを書いていく文化を考えた奴をスカイツリーの窓から投げ捨てたいくらいには設定ファイルも見慣れておりますとも
	enogu	スクリプトで設定するという手法は個人的には好きです。作動状態が一発で分かる。
02:13	umethyl	実際、人狼式で私が作っているのは役職とかコンテンツ側だしねー
	umethyl	あー、設定ファイルの組みなおしはβリリース前にやらないとダメかー
02:15	umethyl	とりあえず、foo_config.php の中身は、FooConfig() のみって方針でいくよー
	umethyl	あー、待てよ
	umethyl	config/foo_config.php って無駄？
02:16	umethyl	config/game.php とか config/cast.php にするべき？
02:17	umethyl	ファイル名とクラス名が一致することを重視するなら foo_config.php なんだけども
02:18	umethyl	このあたりはまた明日考えるかー
	umethyl	それじゃ、今日は離脱ーじゃねー
02:25		<- umethyl は切断しました (Ping timeout)